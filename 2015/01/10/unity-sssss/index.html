<!DOCTYPE html>
<html style="display: none;" lang="zh">
    <head>
    <meta charset="utf-8">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.5.6 -->
    <script>
        window.materialVersion = "1.5.6"
        // Delete localstorage with these tags
        window.oldVersion = [
            'codestartv1',
            '1.3.4',
            '1.4.0',
            '1.4.0b1',
            '1.5.0',
            '1.5.2',
            '1.5.5'
        ]
    </script>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">





    <link rel="dns-prefetch" href="https://qiankanglai.disqus.com"/>



    <link rel="dns-prefetch" href="https://www.google-analytics.com"/>



    <link rel="dns-prefetch" href="https://fonts.googleapis.com"/>





    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!-- Title -->
    
    <title>
        
            山寨SSSSS | 
        
        Loading &amp; Learning
    </title>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.png">
    <link rel="icon" href="/img/favicon.png">

    <meta name="format-detection" content="telephone=no"/>
    <meta name="description" itemprop="description" content="主要参考了KlayGE里的SSSSS实现，在Unity里山寨了一下:">
    <meta name="keywords" content=",Unity">
    <meta name="theme-color" content="#0097A7">

    <!-- Disable Fucking Bloody Baidu Tranformation -->
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(a){try{localStorage.removeItem(a)}catch(b){}};lsloader.setLS=function(a,c){try{localStorage.setItem(a,c)}catch(b){}};lsloader.getLS=function(a){var c="";try{c=localStorage.getItem(a)}catch(b){c=""}return c};versionString="/*"+(window.materialVersion||"unknownVersion")+"*/";lsloader.clean=function(){try{var b=[];for(var a=0;a<localStorage.length;a++){b.push(localStorage.key(a))}b.forEach(function(e){var f=lsloader.getLS(e);if(window.oldVersion){var d=window.oldVersion.reduce(function(g,h){return g||f.indexOf("/*"+h+"*/")!==-1},false);if(d){lsloader.removeLS(e)}}})}catch(c){}};lsloader.clean();lsloader.load=function(f,a,b,d){if(typeof b==="boolean"){d=b;b=undefined}d=d||false;b=b||function(){};var e;e=this.getLS(f);if(e&&e.indexOf(versionString)===-1){this.removeLS(f);this.requestResource(f,a,b,d);return}if(e){var c=e.split(versionString)[0];if(c!=a){console.log("reload:"+a);this.removeLS(f);this.requestResource(f,a,b,d);return}e=e.split(versionString)[1];if(d){this.jsRunSequence.push({name:f,code:e});this.runjs(a,f,e)}else{document.getElementById(f).appendChild(document.createTextNode(e));b()}}else{this.requestResource(f,a,b,d)}};lsloader.requestResource=function(b,e,a,c){var d=this;if(c){this.iojs(e,b,function(h,f,g){d.setLS(f,h+versionString+g);d.runjs(h,f,g)})}else{this.iocss(e,b,function(f){document.getElementById(b).appendChild(document.createTextNode(f));d.setLS(b,e+versionString+f)},a)}};lsloader.iojs=function(d,b,g){var a=this;a.jsRunSequence.push({name:b,code:""});try{var f=new XMLHttpRequest();f.open("get",d,true);f.onreadystatechange=function(){if(f.readyState==4){if((f.status>=200&&f.status<300)||f.status==304){if(f.response!=""){g(d,b,f.response);return}}a.jsfallback(d,b)}};f.send(null)}catch(c){a.jsfallback(d,b)}};lsloader.iocss=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.iofonts=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.runjs=function(f,c,e){if(!!c&&!!e){for(var b in this.jsRunSequence){if(this.jsRunSequence[b].name==c){this.jsRunSequence[b].code=e}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var a=document.createElement("script");a.appendChild(document.createTextNode(this.jsRunSequence[0].code));a.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(a);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else{if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var d=this;var a=document.createElement("script");a.src=this.jsRunSequence[0].path;a.type="text/javascript";this.jsRunSequence[0].status="loading";a.onload=function(){d.jsRunSequence.shift();if(d.jsRunSequence.length>0){d.runjs()}};document.body.appendChild(a)}}};lsloader.tagLoad=function(b,a){this.jsRunSequence.push({name:a,code:"",path:b,status:"failed"});this.runjs()};lsloader.jsfallback=function(c,b){if(!!this.jsnamemap[b]){return}else{this.jsnamemap[b]=b}for(var a in this.jsRunSequence){if(this.jsRunSequence[a].name==b){this.jsRunSequence[a].code="";this.jsRunSequence[a].status="failed";this.jsRunSequence[a].path=c}}this.runjs()};lsloader.cssfallback=function(e,c,b){if(!!this.cssnamemap[c]){return}else{this.cssnamemap[c]=1}var d=document.createElement("link");d.type="text/css";d.href=e;d.rel="stylesheet";d.onload=d.onerror=b;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(d,a)};lsloader.runInlineScript=function(c,b){var a=document.getElementById(b).innerText;this.jsRunSequence.push({name:c,code:a});this.runjs()}})();</script>

    <!-- Import queue -->
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Import CSS -->
    
        <style id="material_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_css","/css/material.min.css?Z7a72R1E4SxzBKR/WGctOA==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
        <style id="style_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("style_css","/css/style.min.css?NKhlKQkXw/c66TR5p4wO+w==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>

        
            
                <style id="prettify_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("prettify_css","/css/prettify.min.css?zp8STOU9v89XWFEnN+6YmQ==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
                <style id="prettify_theme"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("prettify_theme","/css/prettify/atelier-estuary-light.min.css?ZQObwZXHH6Mt8MNbyQJYfQ==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
            
        

    

    

    <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
    overflow-x: hidden !important;
  }
  
  code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #EEEEEE !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #EEEEEE !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #EEEEEE !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-color: #F5F5F5;
      }

      /* blog_info bottom background */
      #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
        background-color: #fff;
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->
<!-- Import Roboto -->

    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">


<!-- Import Material Icons -->


    <style id="material_icons"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_icons","/css/material-icons.css?pqhB/Rd/ab0H2+kZp0RDmw==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>




    <!-- Import jQuery -->
    
        <script>lsloader.load("jq_js","https://cdn.bootcss.com/jquery/2.2.0/jquery.min.js", true)</script>
    

    <!-- WebAPP Icons -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Loading &amp; Learning">
    <meta name="msapplication-starturl" content="http://qiankanglai.me/2015/01/10/unity-sssss/">
    <meta name="msapplication-navbutton-color" content="#0097A7">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="Loading &amp; Learning">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" href="/img/favicon.png">

    <!-- Site Verification -->
    
    

    <!-- RSS -->
    

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="http://qiankanglai.me/2015/01/10/unity-sssss/">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="山寨SSSSS | Loading &amp; Learning">
    <meta property="og:image" content="/img/favicon.png">
    <meta property="og:description" content="主要参考了KlayGE里的SSSSS实现，在Unity里山寨了一下:">
    <meta property="og:article:tag" content="Unity"> 

    
        <meta property="article:published_time" content="Sat Jan 10 2015 00:00:00 GMT+0800">
        <meta property="article:modified_time" content="Fri Mar 01 2019 23:33:53 GMT+0800">
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:card" content="summary_large_image">

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="http://qiankanglai.me/2015/01/10/unity-sssss/index.html" />
    

    <!-- Structured-data for SEO -->
    
        


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage": "http://qiankanglai.me/2015/01/10/unity-sssss/index.html",
    "headline": "山寨SSSSS",
    "datePublished": "Sat Jan 10 2015 00:00:00 GMT+0800",
    "dateModified": "Fri Mar 01 2019 23:33:53 GMT+0800",
    "author": {
        "@type": "Person",
        "name": "Kanglai Qian",
        "image": {
            "@type": "ImageObject",
            "url": "/img/avatar.png"
        },
        "description": "A game developer interested in rendering, with focus on Unity now."
    },
    "publisher": {
        "@type": "Organization",
        "name": "Loading &amp; Learning",
        "logo": {
            "@type":"ImageObject",
            "url": "/img/favicon.png"
        }
    },
    "keywords": ",Unity",
    "description": "主要参考了KlayGE里的SSSSS实现，在Unity里山寨了一下:",
}
</script>


    

    <!-- Analytics -->
    
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-VF30YBX9Q5"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-VF30YBX9Q5');
</script>
    
    
    

    <!-- Custom Head -->
    

<meta name="generator" content="Hexo 5.4.0"></head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span id="MD-burger-id" class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->


<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script type="text/ls-javascript" id="post-thumbnail-script">
    var randomNum = Math.floor(Math.random() * 15 + 1);

    $('.post_thumbnail-random').attr('data-original', '/img/random/material-' + randomNum + '.jpg');
    $('.post_thumbnail-random').addClass('lazy');
</script>

        
    
            <p class="article-headline-p">
                山寨SSSSS
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/avatar.png" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>Kanglai Qian</strong>
        <span>1月 10, 2015</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-none-link" href="/tags/Unity/" rel="tag">Unity</a>
    </ul>
    

    <!-- Share -->
    
        <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=山寨SSSSS&url=http://qiankanglai.me/2015/01/10/unity-sssss/index.html&pic=http://qiankanglai.me/img/favicon.png&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=山寨SSSSS&url=http://qiankanglai.me/2015/01/10/unity-sssss/index.html&via=Kanglai Qian" target="_blank">
            <li class="mdl-menu__item">
                分享到 Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=http://qiankanglai.me/2015/01/10/unity-sssss/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    
        <a class="post_share-link" href="https://plus.google.com/share?url=http://qiankanglai.me/2015/01/10/unity-sssss/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Google+
            </li>
        </a>
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    

    <!-- Share Telegram -->
    
</ul>

    
</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <p>主要参考了<a target="_blank" rel="noopener" href="http://www.klayge.org/2013/12/24/klayge-4-4%E4%B8%AD%E6%B8%B2%E6%9F%93%E7%9A%84%E6%94%B9%E8%BF%9B%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9Asssss/">KlayGE里的SSSSS实现</a>，在Unity里山寨了一下:</p>
<a id="more"></a>

<table>
<thead>
<tr>
<th>SSSSS打开</th>
<th>SSSSS关闭</th>
</tr>
</thead>
<tbody><tr>
<td><img src="/images/unity_sssss_on.jpg"></td>
<td><img src="/images/unity_sssss_off.jpg"></td>
</tr>
</tbody></table>
<p>然后不得不吐槽u3d的API太少了，怎么优化都不给力…</p>
<ul>
<li>参考<a target="_blank" rel="noopener" href="http://forum.unity3d.com/threads/mrt-example.152050/#post-1118431">MRT example</a>用倒是用出来了，不过有点麻烦，而且后来根本没法跑3个Loop，删到只剩下x/y方向各一次也用不上了…</li>
<li>在后处理里没法用stencil真是猎奇啊啊啊，<a target="_blank" rel="noopener" href="http://answers.unity3d.com/questions/621279/using-the-stencil-buffer-in-a-post-process.html">Using the stencil-buffer in a post-process?</a>这个帖子里描述的一模一样;</li>
<li>替换掉<code>Graphics.Blit</code>也基本没有效果提升;</li>
<li>没有factor blend真麻烦，还要自己在代码里算混合…</li>
<li>最后还尝试了在<code>OnPostRender()</code>里搞，如果是相机有RT的话、这样能读取到stencil倒是，不过会有<a target="_blank" rel="noopener" href="http://answers.unity3d.com/questions/799941/blit-camera-targettexture-to-screen.html">其他的问题</a></li>
</ul>
<p>反正就是各种蛋疼，N5上都只有30fps；实在不行只能考虑纹理空间的SSS了，不然每次算整个屏幕太费了~</p>
<figure class="highlight glsl"><figcaption><span>SSSSS.shader</span><a href="/downloads/code/SSSSS.shader">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line">Shader &quot;Kanglai/SSSSS&quot; {</span><br><span class="line">    Properties {</span><br><span class="line">        _MainTex (&quot;Base (RGB)&quot;, 2D) = &quot;white&quot; {}</span><br><span class="line">    }</span><br><span class="line">    CGINCLUDE</span><br><span class="line">    </span><br><span class="line">    <span class="meta">#include &quot;UnityCG.cginc&quot;</span></span><br><span class="line">    </span><br><span class="line">    struct v2f {</span><br><span class="line">        float4 pos : SV_POSITION;</span><br><span class="line">        float2 uv : TEXCOORD0;</span><br><span class="line">    };</span><br><span class="line">    </span><br><span class="line">    <span class="type">sampler2D</span> _MainTex;</span><br><span class="line">    <span class="type">sampler2D</span> _CameraDepthNormalsTexture;    <span class="comment">//built-in</span></span><br><span class="line">    </span><br><span class="line">    float2 <span class="built_in">step</span>;</span><br><span class="line">    <span class="type">float</span> correction;</span><br><span class="line">        </span><br><span class="line">    <span class="type">sampler2D</span> _FrameTex;</span><br><span class="line">    float4 _BlendFactor;</span><br><span class="line">    </span><br><span class="line">    v2f vert( appdata_img v ) {</span><br><span class="line">        v2f o;</span><br><span class="line">        o.pos = mul(UNITY_MATRIX_MVP, v.vertex);</span><br><span class="line">        o.uv = v.texcoord.xy;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> o;</span><br><span class="line">    } </span><br><span class="line">    </span><br><span class="line">    half4 GaussianBlur(v2f i){</span><br><span class="line">        <span class="comment">// Gaussian weights for the six samples around the current pixel:</span></span><br><span class="line">        <span class="comment">//   -3 -2 -1 +1 +2 +3</span></span><br><span class="line">        <span class="type">float</span> w[<span class="number">6</span>] = { <span class="number">0.006</span>f,   <span class="number">0.061</span>f,   <span class="number">0.242</span>f,  <span class="number">0.242</span>f,  <span class="number">0.061</span>f, <span class="number">0.006</span>f };</span><br><span class="line">        <span class="type">float</span> o[<span class="number">6</span>] = {  <span class="number">-1.0</span>f, <span class="number">-0.6667</span>f, <span class="number">-0.3333</span>f, <span class="number">0.3333</span>f, <span class="number">0.6667</span>f,   <span class="number">1.0</span>f };</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Fetch color and linear depth for current pixel:</span></span><br><span class="line">        float4 colorM = tex2D(_MainTex, i.uv);</span><br><span class="line">        <span class="type">float</span> depthM =  DecodeFloatRG(tex2D (_CameraDepthNormalsTexture, i.uv).zw);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Accumulate center sample, multiplying it with its gaussian weight:</span></span><br><span class="line">        float4 colorBlurred = colorM;</span><br><span class="line">        colorBlurred.rgb *= <span class="number">0.382</span>f;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// Calculate the step that we will use to fetch the surrounding pixels,</span></span><br><span class="line">        <span class="comment">// where &quot;step&quot; is:</span></span><br><span class="line">        <span class="comment">//     step = sssStrength * gaussianWidth * pixelSize * dir</span></span><br><span class="line">        <span class="comment">// The closer the pixel, the stronger the effect needs to be, hence</span></span><br><span class="line">        <span class="comment">// the factor 1.0 / depthM.</span></span><br><span class="line">        float2 finalStep = colorM.a * <span class="built_in">step</span> / depthM * <span class="number">0.0125</span>f;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">6</span>; ++ j)</span><br><span class="line">        {</span><br><span class="line">            <span class="comment">// Fetch color and depth for current sample:</span></span><br><span class="line">            float2 <span class="keyword">offset</span> = i.uv + o[j] * finalStep;</span><br><span class="line">            float3 color = tex2D(_MainTex, <span class="keyword">offset</span>).rgb;</span><br><span class="line">            <span class="type">float</span> depth =  DecodeFloatRG(tex2D (_CameraDepthNormalsTexture, <span class="keyword">offset</span>).zw);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// If the difference in depth is huge, we lerp color back to &quot;colorM&quot;:</span></span><br><span class="line">            <span class="type">float</span> s = <span class="built_in">min</span>(correction * <span class="built_in">abs</span>(depthM - depth), <span class="number">1</span>);</span><br><span class="line">            color = lerp(color, colorM.rgb, s);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Accumulate:</span></span><br><span class="line">            colorBlurred.rgb += w[j] * color;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> colorBlurred;</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    half4 frag1(v2f i) : SV_Target{</span><br><span class="line">        half4 o = GaussianBlur(i);</span><br><span class="line">        <span class="keyword">return</span> o;</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    half4 frag2(v2f i) : SV_Target{</span><br><span class="line">        half4 colorBlurred = GaussianBlur(i);</span><br><span class="line">        half4 frame_input = tex2D(_FrameTex, i.uv);</span><br><span class="line">        half4 o;</span><br><span class="line">        o.rgb = lerp(frame_input.rgb, colorBlurred.rgb, _BlendFactor.rgb);</span><br><span class="line">        o.a = frame_input.a + colorBlurred.a;</span><br><span class="line">        <span class="keyword">return</span> o;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    ENDCG </span><br><span class="line">    SubShader {</span><br><span class="line">        Pass {</span><br><span class="line">            ZTest Always Cull Off ZWrite Off</span><br><span class="line">            Fog { Mode off }</span><br><span class="line"></span><br><span class="line">            CGPROGRAM</span><br><span class="line">            <span class="meta">#pragma fragmentoption ARB_precision_hint_fastest </span></span><br><span class="line">            <span class="meta">#pragma glsl</span></span><br><span class="line">            <span class="meta">#pragma target 3.0</span></span><br><span class="line">            <span class="meta">#pragma vertex vert</span></span><br><span class="line">            <span class="meta">#pragma fragment frag1</span></span><br><span class="line">            ENDCG</span><br><span class="line">        }</span><br><span class="line">        </span><br><span class="line">        Pass {</span><br><span class="line">            ZTest Always Cull Off ZWrite Off</span><br><span class="line">            Fog { Mode off }   </span><br><span class="line">            CGPROGRAM</span><br><span class="line">            <span class="meta">#pragma fragmentoption ARB_precision_hint_fastest </span></span><br><span class="line">            <span class="meta">#pragma glsl</span></span><br><span class="line">            <span class="meta">#pragma target 3.0</span></span><br><span class="line">            <span class="meta">#pragma vertex vert</span></span><br><span class="line">            <span class="meta">#pragma fragment frag2</span></span><br><span class="line">            ENDCG</span><br><span class="line">        }</span><br><span class="line">    } </span><br><span class="line">    FallBack off</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<figure class="highlight csharp"><figcaption><span>SSSSS.cs</span><a href="/downloads/code/SSSSS.cs">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">SSSSS</span> : <span class="title">MonoBehaviour</span> {</span><br><span class="line">    <span class="keyword">public</span> Shader sssssShader = <span class="literal">null</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> Material sssssMaterial = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">OnEnable</span> (<span class="params"></span>)</span> {</span><br><span class="line">        camera.depthTextureMode |= DepthTextureMode.DepthNormals;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">OnDisable</span>(<span class="params"></span>)</span> {</span><br><span class="line">        <span class="keyword">if</span>( sssssMaterial ) {</span><br><span class="line">            DestroyImmediate( sssssMaterial );</span><br><span class="line">        }</span><br><span class="line">    }    </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">CreateMaterials</span>(<span class="params"></span>)</span> {</span><br><span class="line">        <span class="keyword">if</span> (sssssMaterial == <span class="literal">null</span>) {</span><br><span class="line">            sssssMaterial = <span class="keyword">new</span> Material(sssssShader);</span><br><span class="line">            sssssMaterial.hideFlags = HideFlags.DontSave;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">Start</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    {</span><br><span class="line">        <span class="comment">// Disable if we don&#x27;t support image effects</span></span><br><span class="line">        <span class="keyword">if</span> (!SystemInfo.supportsImageEffects) {</span><br><span class="line">            enabled = <span class="literal">false</span>;</span><br><span class="line">            Debug.Log(<span class="string">&quot;PostProcess SSSSS: Image Effects not supported&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span> (!SystemInfo.SupportsRenderTextureFormat (RenderTextureFormat.Depth)) {</span><br><span class="line">            enabled = <span class="literal">false</span>;</span><br><span class="line">            Debug.Log(<span class="string">&quot;PostProcess SSSSS: Depth Texture not supported&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        CreateMaterials();</span><br><span class="line">        <span class="comment">// Disable if the shader can&#x27;t run on the users graphics card</span></span><br><span class="line">        <span class="keyword">if</span> (!sssssShader || !sssssMaterial.shader.isSupported) {</span><br><span class="line">            enabled = <span class="literal">false</span>;</span><br><span class="line">            Debug.Log(<span class="string">&quot;PostProcess SSSSS: shader or material not found&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> sss_strength = <span class="number">1.0f</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> correction = <span class="number">1.0f</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">OnRenderImage</span> (<span class="params">RenderTexture source, RenderTexture destination</span>)</span></span><br><span class="line"><span class="function"></span>    {</span><br><span class="line">        RenderTexture blur_x_tex_ = RenderTexture.GetTemporary (source.width/<span class="number">2</span>, source.height/<span class="number">2</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// We may disable/enable the script when running in Editor</span></span><br><span class="line">        CreateMaterials();</span><br><span class="line">        </span><br><span class="line">        sssssMaterial.SetTexture(<span class="string">&quot;_MainTex&quot;</span>, source);</span><br><span class="line">        sssssMaterial.SetFloat(<span class="string">&quot;correction&quot;</span>, correction);</span><br><span class="line">        sssssMaterial.SetVector(<span class="string">&quot;step&quot;</span>, <span class="keyword">new</span> Vector4(<span class="number">1.0f</span> * sss_strength / source.width, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>));</span><br><span class="line">        Graphics.Blit(source, blur_x_tex_, sssssMaterial, <span class="number">0</span>);</span><br><span class="line">        </span><br><span class="line">        sssssMaterial.SetTexture(<span class="string">&quot;_MainTex&quot;</span>, blur_x_tex_);</span><br><span class="line">        sssssMaterial.SetFloat(<span class="string">&quot;correction&quot;</span>, correction);</span><br><span class="line">        sssssMaterial.SetVector(<span class="string">&quot;step&quot;</span>, <span class="keyword">new</span> Vector4(<span class="number">0</span>, <span class="number">1.0f</span> * sss_strength / source.height, <span class="number">0</span>, <span class="number">0</span>));</span><br><span class="line">        sssssMaterial.SetTexture(<span class="string">&quot;_FrameTex&quot;</span>, source);</span><br><span class="line">        sssssMaterial.SetVector(<span class="string">&quot;_BlendFactor&quot;</span>, <span class="keyword">new</span> Vector4(<span class="number">0.3251f</span>, <span class="number">0.45f</span>, <span class="number">0.3584f</span>, <span class="number">1.0f</span>));</span><br><span class="line">        Graphics.Blit(blur_x_tex_, destination, sssssMaterial, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        GL.PushMatrix();</span></span><br><span class="line"><span class="comment">        GL.LoadOrtho();</span></span><br><span class="line"><span class="comment">        </span></span><br><span class="line"><span class="comment">        RenderTexture.active = blur_x_tex_;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        sssssMaterial.SetTexture(&quot;_MainTex&quot;, source);</span></span><br><span class="line"><span class="comment">        sssssMaterial.SetFloat(&quot;correction&quot;, correction);</span></span><br><span class="line"><span class="comment">        sssssMaterial.SetVector(&quot;step&quot;, new Vector4(1.0f * sss_strength / source.width, 0, 0, 0));</span></span><br><span class="line"><span class="comment">        sssssMaterial.SetPass(0);</span></span><br><span class="line"><span class="comment">        GL.Begin(GL.QUADS);</span></span><br><span class="line"><span class="comment">        GL.TexCoord2(0.0f, 0.0f); GL.Vertex3(0.0f, 0.0f, 0.1f);</span></span><br><span class="line"><span class="comment">        GL.TexCoord2(1.0f, 0.0f); GL.Vertex3(1.0f, 0.0f, 0.1f);</span></span><br><span class="line"><span class="comment">        GL.TexCoord2(1.0f, 1.0f); GL.Vertex3(1.0f, 1.0f, 0.1f);</span></span><br><span class="line"><span class="comment">        GL.TexCoord2(0.0f, 1.0f); GL.Vertex3(0.0f, 1.0f, 0.1f);</span></span><br><span class="line"><span class="comment">        GL.End();</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        RenderTexture.active = destination;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        sssssMaterial.SetTexture(&quot;_MainTex&quot;, blur_x_tex_);</span></span><br><span class="line"><span class="comment">        sssssMaterial.SetFloat(&quot;correction&quot;, correction);</span></span><br><span class="line"><span class="comment">        sssssMaterial.SetVector(&quot;step&quot;, new Vector4(0, 1.0f * sss_strength / source.height, 0, 0));</span></span><br><span class="line"><span class="comment">        sssssMaterial.SetTexture(&quot;_FrameTex&quot;, source);</span></span><br><span class="line"><span class="comment">        sssssMaterial.SetVector(&quot;_BlendFactor&quot;, new Vector4(0.3251f, 0.45f, 0.3584f, 1.0f));</span></span><br><span class="line"><span class="comment">        sssssMaterial.SetPass(1);</span></span><br><span class="line"><span class="comment">        GL.Begin(GL.QUADS);</span></span><br><span class="line"><span class="comment">        GL.TexCoord2(0.0f, 0.0f); GL.Vertex3(0.0f, 0.0f, 0.1f);</span></span><br><span class="line"><span class="comment">        GL.TexCoord2(1.0f, 0.0f); GL.Vertex3(1.0f, 0.0f, 0.1f);</span></span><br><span class="line"><span class="comment">        GL.TexCoord2(1.0f, 1.0f); GL.Vertex3(1.0f, 1.0f, 0.1f);</span></span><br><span class="line"><span class="comment">        GL.TexCoord2(0.0f, 1.0f); GL.Vertex3(0.0f, 1.0f, 0.1f);</span></span><br><span class="line"><span class="comment">        GL.End();</span></span><br><span class="line"><span class="comment">        </span></span><br><span class="line"><span class="comment">        GL.PopMatrix();</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        RenderTexture.ReleaseTemporary (blur_x_tex_);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
        
    

    
</div>


                

                <!-- Post Comments -->
                
                    
    <!-- 使用 DISQUS_CLICK -->
<div id="disqus-comment">
    <div id="disqus_thread"></div>

<!-- add animation -->
<style>
	.disqus_click_btn {
            line-height: 30px;
            margin: 0;
            min-width: 50px;
            padding: 0 14px;
            display: inline-block;
            font-family: "Roboto", "Helvetica", "Arial", sans-serif;
            font-size: 14px;
            font-weight: 400;
            text-transform: uppercase;
            letter-spacing: 0;
            overflow: hidden;
            will-change: box-shadow;
            transition: box-shadow .2s cubic-bezier(.4, 0, 1, 1), background-color .2s cubic-bezier(.4, 0, .2, 1), color .2s cubic-bezier(.4, 0, .2, 1);
            outline: 0;
            cursor: pointer;
            text-decoration: none;
            text-align: center;
            vertical-align: middle;
            border: 0;
            background: rgba(158, 158, 158, .2);
            box-shadow: 0 2px 2px 0 rgba(0, 0, 0, .14), 0 3px 1px -2px rgba(0, 0, 0, .2), 0 1px 5px 0 rgba(0, 0, 0, .12);
            color: #fff;
            background-color: #757575;
            text-shadow: 0;
            display: none
        }
</style>
	
<div class="btn_click_load"> 
    <button class="disqus_click_btn">阅读评论（请确保 disqus 可以正常加载）</button>
</div>

<script type="text/javascript">
    var disqus_config = function () {
        this.page.url = 'http://qiankanglai.me/2015/01/10/unity-sssss/';  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = 'http://qiankanglai.me/2015/01/10/unity-sssss/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
</script>

<script type="text/ls-javascript" id="disqus-lazy-load-script">
    $.ajax({
        url: 'https://disqus.com/next/config.json',
        timeout: 4000,
        type: 'GET',
        success: (function() {
            var d = document;
            var s = d.createElement('script');
            s.src = '//qiankanglai.disqus.com/embed.js';
            s.setAttribute('data-timestamp', + new Date());
            (d.head || d.body).appendChild(s);
            $('.disqus_click_btn').css('display','none');
        })(),
        error: function() {
          $('.disqus_click_btn').css('display','block');
        }
    });
    $('.btn_click_load').click(function() {  //click to load comments
        (function() { // DON'T EDIT BELOW THIS LINE
            var d = document;
            var s = d.createElement('script');
            s.src = '//qiankanglai.disqus.com/embed.js';
            s.setAttribute('data-timestamp', + new Date());
            (d.head || d.body).appendChild(s);
        })();
        $('.disqus_click_btn').css('display','none');
    });
</script>
  	

</div>
<style>
    #disqus-comment{
        background-color: #eee;
        padding: 2pc;
    }
</style>

                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2015/01/13/osx-vsync/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2015/01/07/cocos2dx-video/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/avatar.png" alt="Kanglai Qian's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        qiankanglai@gmail.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    

    <!-- Categories  -->
    

    <!-- Pages  -->
    
        <li>
            <a href="/tags" title="标签云">
                
                    <i class="material-icons sidebar-material-icons">label</i>
                
                标签云
            </a>
        </li>
        
    
        <li>
            <a href="/timeline" title="时间轴">
                
                    <i class="material-icons sidebar-material-icons">timeline</i>
                
                时间轴
            </a>
        </li>
        
    
        <li>
            <a href="/about" title="关于我">
                
                    <i class="material-icons sidebar-material-icons">person</i>
                
                关于我
            </a>
        </li>
        
    
        <li>
            <a href="/links" title="友情链接">
                
                    <i class="material-icons sidebar-material-icons">links</i>
                
                友情链接
            </a>
        </li>
        
    

    <!-- Article Number  -->
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->


<!-- Theme Material -->


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    

    <!-- Facebook -->
    

    <!-- Google + -->
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    
        <a href="https://github.com/qiankanglai" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-github">
                <span class="visuallyhidden">Github</span>
            </button><!--
     --></a>
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    
        <a href="https://www.zhihu.com/people/qian-kang-lai" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-zhihu">
                <span class="visuallyhidden">Zhihu</span>
            </button><!--
     --></a>
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    

    <!-- V2EX -->
    

    <!-- Segmentfault -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;<span year></span>&nbsp;Loading & Learning
            
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import JS File -->

    <script>lsloader.load("lazyload_js","/js/lazyload.min.js?1BcfzuNXqV+ntF6gq+5X3Q==", true)</script>



    <script>lsloader.load("js_js","/js/js.min.js?Bn9UzEm8RrBSxqyZB0zPjA==", true)</script>



    <script>lsloader.load("np_js","https://cdn.bootcss.com/nprogress/0.2.0/nprogress.min.js", true)</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>









   <!-- 使用 DISQUS js 代码 -->






<!-- UC Browser Compatible -->
<!-- <script>
	var agent = navigator.userAgent.toLowerCase();
	if(agent.indexOf('ucbrowser')>0) {
		document.write('
<link rel="stylesheet" href="/css/uc.css">
');
	   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
	}
</script> -->

<!-- Import prettify js  -->

    
        
            <script>lsloader.load("prettify_js","https://cdn.bootcss.com/prettify/r298/prettify.min.js", true)</script>
        
    



<!-- Window Load -->
<!-- add class for prettify -->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });

    
        
            $(function() {
                $('pre').addClass('prettyprint').attr('style', 'overflow:auto;');
                prettyPrint();
                })
        
    
    
</script>

<!-- MathJax Load-->


<!-- Bing Background -->


<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Custom Footer -->



<script>
    var copyrightNow = new Date().getFullYear();
    var textContent = document.querySelector('span[year]')

    copyrightSince = 2012;
    if (copyrightSince === copyrightNow||copyrightSince === 0000) {
        textContent.textContent = copyrightNow
    } else {
        textContent.textContent = copyrightSince + ' - ' + copyrightNow
    }

    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c © Material Theme | Version: 1.5.6 | https://github.com/viosey/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>

                </main>
            </div>
        </body>
    
</html>
